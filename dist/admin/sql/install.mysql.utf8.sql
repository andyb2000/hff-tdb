DROP TABLE IF EXISTS `#__toydatabase`;
 
CREATE TABLE `#__toydatabase_membership` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`joomla_userid`       INT(11)     NOT NULL,
	`type` smallint(1) NOT NULL,
	`urn` varchar(255) NOT NULL,
	`name` varchar(255) NOT NULL,
	`companyname` varchar(255) NOT NULL,
	`address1` varchar(255) NOT NULL,
	`address2` varchar(255) NOT NULL,
	`town` varchar(255) NOT NULL,
	`postcode` varchar(255) NOT NULL,
	`telephone` varchar(255) NOT NULL,
	`mobile` varchar(255) NOT NULL,
	`email` varchar(255) NOT NULL,
	`memb_category` smallint(1) NOT NULL,
	`renewaldate` datetime NOT NULL,
	`joindate` datetime NOT NULL,
	`disabilities` blob NOT NULL,
	`children` smallint(1) NOT NULL,
	`active` smallint(1) NOT NULL,
	`creationdate` datetime NOT NULL,
	`adminuser` int(11) NOT NULL,
	`adminnotes` blob NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;

CREATE TABLE `#__toydatabase_membershiptypes` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`type` varchar(255) NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
	
CREATE TABLE `#__toydatabase_membershiplink` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`membershipid` int(11) NOT NULL,
	`membershiptypeid` int(11) NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;

CREATE TABLE `#__toydatabase_equipment_category` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`category` varchar(255) NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
	
CREATE TABLE `#__toydatabase_equipment` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`urn` varchar(255) NOT NULL,
	`name` varchar(255) NOT NULL,
	`picture` varchar(255) NOT NULL,
	`description` blob NOT NULL,
	`storagelocation` varchar(255) NOT NULL,
	`status` smallint(1) NOT NULL,
	`active` smallint(1) NOT NULL,
	`creationdate` datetime NOT NULL,
	`adminuser` int(11) NOT NULL,
	`notes` blob NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
	
CREATE TABLE `#__toydatabase_categorylink` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`equipmentid` int(11) NOT NULL,
	`categoryid` int(11) NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
	
CREATE TABLE `#__toydatabase_loanlink` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`equipmentid` int(11) NOT NULL,
	`membershipid` int(11) NOT NULL,
	`requestdate` datetime NOT NULL,
	`loandate` datetime NOT NULL,
	`returnbydate` datetime NOT NULL,
	`returndate` datetime NOT NULL,
	`status` smallint(1) NOT NULL,
	`adminuser` int(11) NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
CREATE TABLE `#__toydatabase_permissions` (
	`id`       INT(11)     NOT NULL AUTO_INCREMENT,
	`function` varchar(255) NOT NULL,
	`groupname` blob NOT NULL,
	`permissions` blob NOT NULL,
	PRIMARY KEY (`id`)
)
	ENGINE =MyISAM
	AUTO_INCREMENT =0
	DEFAULT CHARSET =utf8;
INSERT INTO `#__toydatabase_permissions` (`id`, `function`, `groupname`, `permissions`) VALUES
(1, 'member', 0x32, ''),
(4, 'cron', '', 0x323031372d30312d30362031343a33313a3432),
(5, 'front_html', 0x3c6833207374796c653d22746578742d616c69676e3a2063656e7465723b223e57656c636f6d6520746f206f757220546f79204c696272617279204f6e6c696e652053656c662d5365727669636520616e6420436174616c6f6775653c2f68333e, ''),
(6, 'admin_emails', 0x696e666f4062726f6164636173742d746563682e636f2e756b, ''),
(7, 'email_signup', 0x3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e4869207468657265c2a03c2f7370616e3e3c7370616e207374796c653d22666f6e742d73697a653a203970743b20666f6e742d66616d696c793a20436f6e736f6c61733b206261636b67726f756e643a207768697465736d6f6b653b223e25256d656d6265726e616d6525253c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e5468616e6b20796f7520666f72206a6f696e696e672074686520546f79204c6f616e20536572766963652e3c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e596f7572206170706c69636174696f6e206973206177616974696e6720617070726f76616c20616e6420796f752077696c6c20726563656976652061206675727468657220656d61696c20636f6e6669726d696e67207768656e207468697320686173206265656e20646f6e652e3c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223ec2a03c2f703e, ''),
(8, 'email_signupapproval', 0x3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e4869207468657265c2a03c2f7370616e3e3c7370616e207374796c653d22666f6e742d73697a653a203970743b20666f6e742d66616d696c793a20436f6e736f6c61733b206261636b67726f756e643a207768697465736d6f6b653b223e25256d656d6265726e616d6525253c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e596f7572207265717565737420746f206a6f696e2074686520546f79204c6f616e205365727669636520686173206265656e20617070726f7665642e3c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e596f7520617265206e6f772077656c636f6d6520746f206c6f6720696e207573696e672074686520757365726e616d65202dc2a03c2f7370616e3e3c7370616e207374796c653d22666f6e742d73697a653a203970743b20666f6e742d66616d696c793a20436f6e736f6c61733b206261636b67726f756e643a207768697465736d6f6b653b223e25256d656d626572757365726e616d6525253c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223ec2a03c2f703e, ''),
(9, 'email_signuprejected', 0x3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e4869207468657265c2a03c2f7370616e3e3c7370616e207374796c653d22666f6e742d73697a653a203970743b20666f6e742d66616d696c793a20436f6e736f6c61733b206261636b67726f756e643a207768697465736d6f6b653b223e25256d656d6265726e616d6525253c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e5468616e6b20796f7520666f7220796f7572207265717565737420746f206a6f696e2074686520546f79204c6f616e20536572766963652e3c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a2056657264616e612c2073616e732d73657269663b223e556e666f7274756e6174656c792c20746865726520697320616e206973737565207769746820796f7572206170706c69636174696f6e20616e642077652068617665206265656e20756e61626c6520746f20636f6e7461637420796f7520746f2064697363757373207468697320667572746865722ec2a02057652068617665207468657265666f72652068616420746f2072656a65637420796f7572206170706c69636174696f6e20617420746869732074696d652e203c2f7370616e3e3c2f703e0d0a3c70207374796c653d226d617267696e2d746f703a2030696e3b206d617267696e2d72696768743a2030696e3b206d617267696e2d626f74746f6d3a2031312e323570743b223ec2a03c2f703e, ''),
(10, 'email_booktoy_request', 0x3c703e48692074686572652025256d656d6265726e616d6525253c2f703e0d0a3c703e5468616e6b7320666f7220796f7572207265717565737420746f206c6f616e202d202525746f796e616d6525253c2f703e0d0a3c703e5468697320726571756573742069732070656e64696e6720617070726f76616c2e20c2a0596f752077696c6c20726563656976652061206675727468657220656d61696c206f6e636520697420686173206265656e20617070726f7665643c2f703e0d0a3c703ec2a03c2f703e0d0a3c707265207374796c653d226d617267696e2d626f74746f6d3a20362e373570743b206c696e652d6865696768743a2031332e3570743b206261636b67726f756e642d636f6c6f723a207768697465736d6f6b653b20776f72642d627265616b3a20627265616b2d616c6c3b223e3c7370616e207374796c653d22666f6e742d73697a653a20382e3570743b20666f6e742d66616d696c793a202756657264616e61272c73616e732d73657269663b20636f6c6f723a20233333333333333b223e206c6f616e202d203c2f7370616e3e3c7370616e207374796c653d22666f6e742d73697a653a20392e3070743b20666f6e742d66616d696c793a20436f6e736f6c61733b20636f6c6f723a20233333333333333b223e2525746f796e616d6525253c2f7370616e3e3c2f7072653e0d0a3c707265207374796c653d226d617267696e2d626f74746f6d3a20362e373570743b206c696e652d6865696768743a2031332e3570743b206261636b67726f756e642d636f6c6f723a207768697465736d6f6b653b20776f72642d627265616b3a20627265616b2d616c6c3b223ec2a03c2f7072653e0d0a3c70207374796c653d226d617267696e3a2030696e2030696e2031312e323570742030696e3b223ec2a03c2f703e, ''),
(11, 'email_booktoy_approve', 0x3c703e48692074686572652025256d656d6265726e616d6525253c2f703e0d0a3c703e5468616e6b7320666f7220796f7572207265717565737420746f206c6f616e202d202525746f796e616d6525253c2f703e0d0a3c703e596f7572207265717565737420686173206265656e20617070726f76656420213c2f703e0d0a3c703e546865206974656d20697320647565206261636b206f6e206f72206265666f7265203a202525746f7972657475726e6461746525253c2f703e, ''),
(12, 'email_booktoy_reject', 0x3c703e48692074686572652025256d656d6265726e616d6525253c2f703e0d0a3c703e5468616e6b7320666f7220796f7572207265717565737420746f206c6f616e202d202525746f796e616d6525253c2f703e0d0a3c703e546865726520697320616e206973737565207769746820746865206974656d20616e642077652063616e6e6f74206c6f616e20697420617420746869732074696d652e3c2f703e, '');
